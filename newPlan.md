# –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è CodeAgent
## –°–∏–Ω—Ç–µ–∑ –ª—É—á—à–∏—Ö –∏–¥–µ–π –∏–∑ —á–µ—Ç—ã—Ä–µ—Ö –ø–ª–∞–Ω–æ–≤

–î–∞—Ç–∞: 2026-01-20
–ê–≤—Ç–æ—Ä: CodeAgent (—Å–∏–Ω—Ç–µ–∑ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–ª–∞–Ω–æ–≤: process_upgrade, llm_improvements, mcp_gates, mcp_roadmap)

## –ö–æ–Ω—Ç–µ–∫—Å—Ç –∏ —Ñ–∏–ª–æ—Å–æ—Ñ–∏—è

### –¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
CodeAgent —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä, —á–∏—Ç–∞—é—â–∏–π –∑–∞–¥–∞—á–∏ –∏–∑ `todo/`, —Ñ–æ—Ä–º–∏—Ä—É—é—â–∏–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —à–∞–±–ª–æ–Ω–∞–º –∏–∑ `config.yaml`, –¥–µ–ª–µ–≥–∏—Ä—É—é—â–∏–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤ Cursor CLI —á–µ—Ä–µ–∑ Docker. LLM –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –¥–ª—è –º–µ—Ç–∞-–æ—Ü–µ–Ω–æ–∫, —Å–∏—Å—Ç–µ–º–∞ –∏–º–µ–µ—Ç —á–µ–∫–ø–æ–∏–Ω—Ç—ã –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ.

### –ö–ª—é—á–µ–≤–∞—è –ø—Ä–æ–±–ª–µ–º–∞
–°–∏—Å—Ç–µ–º–∞ –Ω–µ –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç "—É–º" - —à–∞–±–ª–æ–Ω—ã —Å—Ç–∞—Ç–∏—á–Ω—ã, –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω–∞, –Ω–µ—Ç —Ñ–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –∫–∞—á–µ—Å—Ç–≤–∞, –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç "–ø–∞–º—è—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–∞".

### –†–µ—à–µ–Ω–∏–µ: –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ä–æ–ª–µ–π
- **LLM**: –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏—è —Ç–∞–º, –≥–¥–µ –Ω—É–∂–Ω–∞ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞/–Ω–µ–ø–æ–ª–Ω—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π/–∫–æ–º–ø—Ä–æ–º–∏—Å—Å—ã
- **MCP**: –î–∞—ë—Ç –ø—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ —Ñ–∞–∫—Ç—ã –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —Å—Ä–µ–¥–æ–π
- **Quality Gates**: –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ pipeline
- **Process Memory**: –ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ –æ–ø—ã—Ç–∞ –¥–ª—è —Å–∞–º–æ—É–ª—É—á—à–µ–Ω–∏—è

## –¶–µ–ª–∏ —Ä–∞–∑–≤–∏—Ç–∏—è (–æ—Ç –ø—Ä–∞–∫—Ç–∏—á–Ω—ã—Ö –∫ –º–µ—á—Ç–µ)

### –§–∞–∑–∞ 1: –°—Ç–∞–±–∏–ª—å–Ω—ã–µ –≥–µ–π—Ç—ã –∫–∞—á–µ—Å—Ç–≤–∞ (1-2 –Ω–µ–¥–µ–ª–∏)
- –¢–∏–ø–∏–∑–∞—Ü–∏—è –∑–∞–¥–∞—á —Å Definition of Done
- –£–º–Ω–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —á–µ—Ä–µ–∑ LLM
- –ë–∞–∑–æ–≤—ã–µ quality gates

### –§–∞–∑–∞ 2: LLM-–∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è (2-4 –Ω–µ–¥–µ–ª–∏)
- LLM-–≤–µ—Ä—Å–∏–∏ –≤—Å–µ—Ö –∫–ª—é—á–µ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- –ê–Ω–∞–ª–∏–∑ –æ—à–∏–±–æ–∫ –∏ —Å–∞–º–æ—É–ª—É—á—à–µ–Ω–∏–µ
- –ü–∞–º—è—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–∞

### –§–∞–∑–∞ 3: MCP-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (4-8 –Ω–µ–¥–µ–ª—å)
- –í–Ω–µ—à–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (GitHub, Playwright, PostgreSQL)
- –ü–æ–ª–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π pipeline
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

### –§–∞–∑–∞ 4: –°–∞–º–æ–æ–±—É—á–∞—é—â–∞—è—Å—è —Å–∏—Å—Ç–µ–º–∞ (3-6+ –º–µ—Å—è—Ü–µ–≤)
- –ì–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —Ä–µ—é–∑ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
- –ü—Ä–æ–∞–∫—Ç–∏–≤–Ω–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —ç–≤–æ–ª—é—Ü–∏—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

```mermaid
graph TB
    subgraph CodeAgent[CodeAgent Core]
        Server[Server.py]
        LLM[LLM Manager]
        MCP[MCP Manager]
        Memory[Process Memory]
        Gates[Quality Gates]
    end

    subgraph External[MCP Layer]
        GitHub[GitHub MCP]
        Playwright[Playwright MCP]
        Postgres[PostgreSQL MCP]
        Docker[Docker MCP]
        Slack[Slack MCP]
    end

    subgraph Workflow[Task Pipeline]
        Todo[TodoManager] -->|—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è| Server
        Server -->|—Ç–∏–ø–∏–∑–∞—Ü–∏—è| Gates
        Gates -->|–ø—Ä–æ–≤–µ—Ä–∫–∞| LLM
        LLM -->|—Ä–µ—à–µ–Ω–∏–µ| Cursor[Cursor CLI]
        Cursor -->|—Ä–µ–∑—É–ª—å—Ç–∞—Ç| Gates
        Gates -->|–≤–∞–ª–∏–¥–∞—Ü–∏—è| MCP
        MCP -->|—Ñ–∞–∫—Ç—ã| Memory
        Memory -->|–æ–ø—ã—Ç| LLM
    end

    Server --> MCP
    LLM --> MCP
    MCP --> External
```

## –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 1. –¢–∏–ø–∏–∑–∞—Ü–∏—è –∑–∞–¥–∞—á –∏ Definition of Done

#### –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∑–∞–¥–∞—á
```python
class TaskType(Enum):
    CODE = "code"           # –°–æ–∑–¥–∞–Ω–∏–µ/–∏–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–¥–∞
    DOCS = "docs"           # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
    REFACTOR = "refactor"   # –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥
    TEST = "test"           # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
    RELEASE = "release"     # –î–µ–ø–ª–æ–π/—Ä–µ–ª–∏–∑
    DEVOPS = "devops"       # –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
    RESEARCH = "research"   # –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ
```

#### Definition of Done –ø–æ —Ç–∏–ø–∞–º
```yaml
# config/config.yaml
task_definitions:
  code:
    required_artifacts: ["code_changes", "unit_tests", "docs_update"]
    quality_gates: ["syntax_check", "tests_pass", "no_critical_lints"]
    verification_commands: ["python -m compileall", "pytest", "mypy"]

  docs:
    required_artifacts: ["markdown_files", "cross_references"]
    quality_gates: ["links_valid", "structure_complete"]
    verification_commands: ["markdown-link-check", "doc_structure_check"]

  refactor:
    required_artifacts: ["code_changes", "tests_pass", "api_unchanged"]
    quality_gates: ["backward_compatibility", "performance_not_worse"]
    verification_commands: ["pytest", "api_check", "performance_test"]
```

### 2. Quality Gates System

#### Gate A: –ü–µ—Ä–µ–¥ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º
**–¢—Ä–∏–≥–≥–µ—Ä**: –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏
**–¶–µ–ª—å**: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
**–î–µ–π—Å—Ç–≤–∏—è**:
1. –¢–∏–ø–∏–∑–∞—Ü–∏—è –∑–∞–¥–∞—á–∏ —á–µ—Ä–µ–∑ LLM
2. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —á–µ—Ä–µ–∑ MCP life-docs
3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤

#### Gate B: –ü–æ—Å–ª–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
**–¢—Ä–∏–≥–≥–µ—Ä**: –°–æ–∑–¥–∞–Ω –ø–ª–∞–Ω –≤ `docs/results/current_plan_{task_id}.md`
**–¶–µ–ª—å**: –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ—Å—Ç–∏ –ø–ª–∞–Ω–∞
**–î–µ–π—Å—Ç–≤–∏—è**:
1. LLM-–æ—Ü–µ–Ω–∫–∞ –ø–æ–ª–Ω–æ—Ç—ã –ø–ª–∞–Ω–∞
2. MCP-–ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Ä–µ—Å—É—Ä—Å–æ–≤
3. –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –ø–ª–∞–Ω–∞ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

#### Gate C: –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
**–¢—Ä–∏–≥–≥–µ—Ä**: –ü–æ–ª—É—á–µ–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ (–ø–æ—Å–ª–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π 2..7)
**–¶–µ–ª—å**: –†–∞–Ω–Ω–µ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º, –Ω–µ –∂–¥–∞—Ç—å —Ñ–∏–Ω–∞–ª–∞
**–î–µ–π—Å—Ç–≤–∏—è**:
1. LLM-–æ—Ü–µ–Ω–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç/–æ–∂–∏–¥–∞–Ω–∏—è
2. **Diff fingerprint**: –∞–Ω–∞–ª–∏–∑ —á—Ç–æ –∏–º–µ–Ω–Ω–æ –º–µ–Ω—è–ª–æ—Å—å, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ª–∏ –æ–∂–∏–¥–∞–µ–º–æ–º—É –Ω–∞–±–æ—Ä—É
3. **Invariant checks**: –ø—Ä–æ–µ–∫—Ç —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è (`python -m compileall`), —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç, –ø—Ä–∞–≤–∏–ª–∞ –Ω–µ –Ω–∞—Ä—É—à–µ–Ω—ã
4. **MCP_DOCKER** (—Ç–æ—á–µ—á–Ω–æ): –µ—Å–ª–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –∫–∞—Å–∞–ª–∞—Å—å –∑–∞–ø—É—Å–∫–∞/—Ç–µ—Å—Ç–æ–≤ - –∑–∞–±—Ä–∞—Ç—å —Ñ–∞–∫—Ç—ã (–ª–æ–≥–∏, —Å—Ç–∞—Ç—É—Å—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, exit codes)
5. –ï—Å–ª–∏ –≥–µ–π—Ç –Ω–µ –ø—Ä–æ–π–¥–µ–Ω: **–∫–æ—Ä–æ—Ç–∫–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É—é—â–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è** (–¥–æ–ø. –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è ¬´–∏—Å–ø—Ä–∞–≤—å/–ø–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä—å¬ª), –∞ –Ω–µ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å —Å–ª–µ–ø–æ

#### Gate D: –ü–µ—Ä–µ–¥ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
**–¢—Ä–∏–≥–≥–µ—Ä**: –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Ç–µ—Å—Ç–æ–≤—ã–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º (–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è 3 –∏–ª–∏ 7)
**–¶–µ–ª—å**: –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –æ–∫—Ä—É–∂–µ–Ω–∏–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç–µ—Å—Ç-–ø–ª–∞–Ω—É
**–î–µ–π—Å—Ç–≤–∏—è**:
1. MCP_DOCKER: –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, env vars, healthchecks
2. –ï—Å–ª–∏ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –Ω–µ –≥–æ—Ç–æ–≤–æ: LLM –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç remediation —à–∞–≥–∏ (compose up, –º–∏–≥—Ä–∞—Ü–∏–∏, seed)

#### Gate E: –ü–µ—Ä–µ–¥ —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ü–∏–µ–π
**–¢—Ä–∏–≥–≥–µ—Ä**: –í—Å–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã, –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º (–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è 8)
**–¶–µ–ª—å**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ –∫–æ–º–º–∏—Ç—É
**–î–µ–π—Å—Ç–≤–∏—è**:
1. –§–∏–Ω–∞–ª—å–Ω–∞—è LLM-–≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
2. MCP life-docs: –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –ø—Ä–∞–≤–∏–ª–∞–º (changelog, —Ñ–æ—Ä–º–∞—Ç –∫–æ–º–º–∏—Ç–∞)
3. MCP-–ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ (—Ç–µ—Å—Ç—ã, –ª–∏–Ω—Ç—ã, docs)
4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–º–º–∏—Ç + PR (–µ—Å–ª–∏ –ø—Ä–æ–π–¥–µ–Ω—ã –≤—Å–µ –≥–µ–π—Ç—ã)

**–ê–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è (—Å –≥–µ–π—Ç–∞–º–∏):**
- Auto-commit —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–∏ –≤—Å–µ—Ö –≥–µ–π—Ç–æ–≤ –∫–∞—á–µ—Å—Ç–≤–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–∞—à–∏–Ω–Ω—ã–π "commit summary"
- Auto-push –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –Ω–æ —Å –∑–∞–ø—Ä–µ—Ç–∞–º–∏:
  - ‚ùå –ó–∞–ø—Ä–µ—Ç –Ω–∞ force-push
  - ‚ùå –ó–∞–ø—Ä–µ—Ç –Ω–∞ –∫–æ–º–º–∏—Ç —Å–µ–∫—Ä–µ—Ç–æ–≤
  - ‚ùå –ó–∞–ø—Ä–µ—Ç –Ω–∞ –ø—É—à –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ "–∫—Ä–∞—Å–Ω—ã—Ö" —Ç–µ—Å—Ç–æ–≤
  - üö® Panic switch —á–µ—Ä–µ–∑ HTTP API (`/stop`) –∏–ª–∏ —Ñ–ª–∞–≥ –≤ –∫–æ–Ω—Ñ–∏–≥–µ

### 3. LLM-—É–ª—É—á—à–µ–Ω–∏—è –∫–ª—é—á–µ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

#### –£–º–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã
```python
async def _verify_real_work_done_llm(
    self, task_id: str, todo_item: TodoItem, result_content: str
) -> Tuple[bool, float, Optional[str]]:
    """
    LLM-based –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å best_of_two –∏ fallback –Ω–∞ —Å—Ç–∞—Ä—ã–π –º–µ—Ç–æ–¥
    Returns: (work_done, confidence, evidence)
    """
```
**–î–µ—Ç–∞–ª–∏**: `use_parallel=True` (best_of_two), JSON mode, fallback –ø—Ä–∏ confidence < 70%, LRU –∫—ç—à —Å TTL 1 —á–∞—Å

#### –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
```python
async def _validate_task_result_llm(
    self, task_id: str, todo_item: TodoItem, result_content: str, result_file: Optional[Path] = None
) -> Tuple[bool, Dict[str, Any]]:
    """
    –î–µ—Ç–∞–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å –æ—Ü–µ–Ω–∫–æ–π –∫–∞—á–µ—Å—Ç–≤–∞/–ø–æ–ª–Ω–æ—Ç—ã
    Returns: (is_valid, {"completeness": 0-100, "quality": 0-100, "issues": [...], "recommendations": [...]})
    """
```
**–î–µ—Ç–∞–ª–∏**: best_of_two –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏, —á—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (–¥–æ 5000 —Å–∏–º–≤–æ–ª–æ–≤), –∞–≤—Ç–æ-—Ä–µ—Ç—Ä–∞–π –ø—Ä–∏ –Ω–∏–∑–∫–æ–º –∫–∞—á–µ—Å—Ç–≤–µ

#### –ê–Ω–∞–ª–∏–∑ –æ—à–∏–±–æ–∫
```python
async def _analyze_error_llm(
    self, error_message: str, context: Dict[str, Any]
) -> Dict[str, Any]:
    """
    –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –æ—à–∏–±–æ–∫ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ—à–µ–Ω–∏–π
    Returns: {"error_type": "syntax|logic|dependency|config|unknown", "severity": "critical|high|medium|low", "solutions": [...], "can_auto_fix": bool}
    """
```
**–î–µ—Ç–∞–ª–∏**: –ò—Å—Ç–æ—Ä–∏—è –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 50 –æ—à–∏–±–æ–∫ –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π —Ä–µ—Ç—Ä–∞–µ–≤

#### –£–º–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–∞–¥–∞—á
```python
async def _filter_completed_tasks_llm(
    self, tasks: List[TodoItem]
) -> List[TodoItem]:
    """–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å —É—á–µ—Ç–æ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ LLM"""
```
**–î–µ—Ç–∞–ª–∏**: –ë–∞—Ç—á-–æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ 10 –∑–∞–¥–∞—á, JSON mode —Å –º–∞—Å—Å–∏–≤–æ–º —Ä–µ—à–µ–Ω–∏–π, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

#### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ LLM —Ñ—É–Ω–∫—Ü–∏–∏

**–£–º–Ω—ã–π –≤—ã–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞:**
```python
async def _should_use_cursor_llm(self, todo_item: TodoItem) -> Tuple[bool, Optional[str]]:
    """–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –≤—ã–±–æ—Ä cursor vs crewai –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–∞–¥–∞—á–∏"""
```

**–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–ª—É—á—à–µ–Ω–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π:**
```python
async def _generate_instruction_llm(
    self, todo_item: TodoItem, documentation: str, previous_results: List[str], template: Optional[Dict] = None
) -> str:
    """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ —Å —É—á–µ—Ç–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤"""
```

**LLM-–ø–∞—Ä—Å–∏–Ω–≥ TODO:**
```python
async def _parse_todo_list_llm(self, todo_content: str) -> List[TodoItem]:
    """–ü–∞—Ä—Å–∏–Ω–≥ —Å –ø–æ–Ω–∏–º–∞–Ω–∏–µ–º –∏–µ—Ä–∞—Ä—Ö–∏–∏ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π"""
```

**–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª—é—á–µ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:**
```python
async def _extract_key_info_llm(self, documentation: str, task: TodoItem) -> Dict[str, Any]:
    """–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –¥–ª—è –∑–∞–¥–∞—á–∏"""
```

**–û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã:** `src/llm/llm_utils.py` —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏:
- `extract_json_object()` - –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ JSON
- `safe_llm_call()` - –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤—ã–∑–æ–≤ —Å fallback
- `batch_llm_process()` - –±–∞—Ç—á-–æ–±—Ä–∞–±–æ—Ç–∫–∞
- `cache_llm_result()` - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### 4. Stage Controller (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ—Ö–æ–¥–∞–º–∏)

**–ö–æ–Ω—Ü–µ–ø—Ü–∏—è**: –¢–æ–Ω–∫–∏–π —Å–ª–æ–π –ø–æ–≤–µ—Ä—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ `instruction_id 1..8` –∏ `TaskPhase.*` –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è.

**–†–µ—à–µ–Ω–∏—è Stage Controller**:
- **–î–≤–∏–≥–∞—Ç—å—Å—è —Å—Ç—Ä–æ–≥–æ –ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏** (default –ø–æ–≤–µ–¥–µ–Ω–∏–µ)
- **–í—Å—Ç–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π micro-step** (—Ä–µ–º–µ–¥–∏–∞—Ü–∏—è/–ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–∞–ª–µ –≥–µ–π—Ç–∞)
- **–û—Ç–∫–∞—Ç–∏—Ç—å—Å—è –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â—É—é —Å—Ç–∞–¥–∏—é** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–ª–∞–Ω —Å–ª–∞–±—ã–π ‚Üí –≤–µ—Ä–Ω—É—Ç—å –Ω–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ)

**–û—Å–Ω–æ–≤–∞ –¥–ª—è —Ä–µ—à–µ–Ω–∏–π**:
- –°–∏–≥–Ω–∞–ª—ã –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (`instruction_num`, `TaskPhase`, –Ω–∞–ª–∏—á–∏–µ/—Å–æ–¥–µ—Ä–∂–∏–º–æ–µ result-—Ñ–∞–π–ª–∞)
- –§–∞–∫—Ç—ã –∏–∑ MCP (docs/–æ–∫—Ä—É–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ life-docs –∏ MCP_DOCKER)
- –õ–æ–∫–∞–ª—å–Ω—ã–µ —ç–≤—Ä–∏—Å—Ç–∏–∫–∏ (–æ—à–∏–±–∫–∏, —Ç–∞–π–º–∞—É—Ç—ã, —á–∞—Å—Ç—ã–µ fallback'–∏)

**–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è**:
- –í—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ MCP-–≤—ã–∑–æ–≤–æ–≤ –≤ –ø—Ä–æ–º–ø—Ç—ã —à–∞–±–ª–æ–Ω–æ–≤ (`config/config.yaml` ‚Üí `instructions.*.template`)
- –ü—Ä–∏–º–µ—Ä: "–ø–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫‚Ä¶ –∏—Å–ø–æ–ª—å–∑—É–π MCP life-docs —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ ‚Ä¶; –∏—Å–ø–æ–ª—å–∑—É–π MCP_DOCKER —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å ‚Ä¶; –ø—Ä–∏–ª–æ–∂–∏ —Ñ–∞–∫—Ç—ã –≤ –æ—Ç—á—ë—Ç"
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ: –ø–µ—Ä–µ–Ω–æ—Å —á–∞—Å—Ç–∏ –≥–µ–π—Ç–æ–≤ –≤ `server.py` –∫–∞–∫ –ø—Ä–µ–¥-/–ø–æ—Å—Ç-–æ–±—Ä–∞–±–æ—Ç–∫—É

### 5. Process Memory System

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–º—è—Ç–∏
```json
{
  "task_patterns": {
    "pattern_hash": {
      "task_type": "code",
      "template_used": "implement_feature",
      "model": "gpt-4",
      "success_rate": 0.85,
      "avg_duration": 450,
      "common_issues": ["test_failures", "lint_errors"],
      "recommended_fixes": ["add_type_hints", "improve_test_coverage"]
    }
  },
  "error_patterns": {
    "error_hash": {
      "error_type": "syntax",
      "frequency": 15,
      "solutions": ["use_black_formatter", "add_mypy_check"],
      "prevention": "enable_precommit_hooks"
    }
  }
}
```

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
- –í—ã–±–æ—Ä –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

### 6. MCP-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (Tier 1)

**Discovery —à–∞–≥ (–æ–±—è–∑–∞—Ç–µ–ª–µ–Ω)**:
- –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫—É—é –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å MCP –≤ —Å—Ä–µ–¥–µ Cursor Agent
- –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö MCP —Å–µ—Ä–≤–µ—Ä–æ–≤, –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤, —Å—Ö–µ–º –≤—ã–∑–æ–≤–æ–≤
- –í—ã—è—Å–Ω–∏—Ç—å: –≥–¥–µ MCP –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å ‚Äî –≤–Ω—É—Ç—Ä–∏ Cursor Agent (–ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ) –∏–ª–∏ –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
- MVP: Gate A (life-docs –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–µ—Ä–µ–¥ –ø–ª–∞–Ω–æ–º), Gate D (docker preflight –ø–µ—Ä–µ–¥ —Ç–µ—Å—Ç–∞–º–∏), Gate E (docs/quality –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º)

**–ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è** (–ø–æ `mcp_integration_roadmap`):

#### MCP life-docs (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô)
**–ó–∞—á–µ–º**: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –ø—Ä–æ–µ–∫—Ç–Ω–æ–π –ø–∞–º—è—Ç–∏ (–≥–∞–π–¥–æ–≤, ADR, –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π, —Å–æ–≥–ª–∞—à–µ–Ω–∏–π)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
- Gate A: –∑–∞–ø—Ä–æ—Å–∏—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, –ø—Ä–∏–Ω—è—Ç—ã–µ —Ä–µ—à–µ–Ω–∏—è, —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ docs ‚Üí "context pack" (3‚Äì10 –±—É–ª–ª–µ—Ç–æ–≤ + —Å—Å—ã–ª–∫–∏)
- Gate B: —Å–≤–µ—Ä–∏—Ç—å –ø–ª–∞–Ω —Å –¥–æ–∫–∞–º–∏ –Ω–∞ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—è, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —à–∞–≥–∏, –ø—Ä–∏–Ω—è—Ç—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
- Gate E: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–∞–≤–∏–ª–∞–º (changelog, —Ñ–æ—Ä–º–∞—Ç –∫–æ–º–º–∏—Ç–∞)

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**: 
- –ü–µ—Ä–≤—ã–π —ç—Ç–∞–ø: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `search_docs/search_todo` –∏ –ø—Ä–∏–∫–ª–∞–¥—ã–≤–∞—Ç—å 3‚Äì5 —Å–∞–º—ã—Ö —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ –∫ prompt
- –í—Ç–æ—Ä–æ–π —ç—Ç–∞–ø: –ø–æ—Å–ª–µ MCP Engine v2 (–∏–Ω–¥–µ–∫—Å/—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ) ‚Äî —Å–¥–µ–ª–∞—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

#### GitHub MCP (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô)
**–ö–µ–π—Å—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**:
1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ PR –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á (–≤–µ—Ç–∫–∞ ‚Üí –∫–æ–º–º–∏—Ç ‚Üí PR —Å labels –∏ reviewers)
2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ issues –∏–∑ –æ—à–∏–±–æ–∫ (–ø–æ–ª–Ω—ã–π traceback + –∫–æ–Ω—Ç–µ–∫—Å—Ç + labels)
3. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è todo ‚Üî GitHub Issues (—Å–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ/–∑–∞–∫—Ä—ã—Ç–∏–µ issues)

#### Playwright MCP (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô)
**–ö–µ–π—Å—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**:
1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π (headless, —Å–∫—Ä–∏–Ω—à–æ—Ç—ã, –≤–∏–¥–µ–æ)
2. –í–∏–∑—É–∞–ª—å–Ω–æ–µ —Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (before/after —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤)
3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ (axe-core, a11y –ø—Ä–æ–≤–µ—Ä–∫–∏)

#### PostgreSQL MCP (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üü† –í–´–°–û–ö–ò–ô)
**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î**:
- `tasks`: id, name, status, created_at, completed_at, duration
- `instructions`: id, task_id, instruction_text, cursor_response
- `test_results`: id, task_id, test_type, success, details
- `metrics`: id, task_id, metric_name, value, timestamp

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**: –ó–∞–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤–æ–≥–æ `codeAgentProjectStatus.md` –Ω–∞ –ë–î –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞, –∞–Ω–∞–ª–∏—Ç–∏–∫–∏, –≥—Ä–∞—Ñ–∏–∫–æ–≤

#### Docker MCP (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üü† –í–´–°–û–ö–ò–ô)
**–ö–µ–π—Å—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**:
1. –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö (–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Å –∞–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ–º)
2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π (Redis + app + network –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤)

#### Slack MCP (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üü° –°–†–ï–î–ù–ò–ô, Tier 2)
**–ö–µ–π—Å—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**:
1. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∑–∞–¥–∞—á (–¥–µ—Ç–∞–ª–∏: —Ñ–∞–π–ª—ã, —Ç–µ—Å—Ç—ã, PR, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)
2. –ê–ª–µ—Ä—Ç—ã –æ–± –æ—à–∏–±–∫–∞—Ö (traceback, –¥–µ–π—Å—Ç–≤–∏—è, —Å—Å—ã–ª–∫–∏ –Ω–∞ issues)

#### Sentry MCP (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üü° –°–†–ï–î–ù–ò–ô, Tier 2)
**–ö–µ–π—Å—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ—à–∏–±–æ–∫ –≤ Sentry —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º (task_id, file, line, traceback) + —Å–æ–∑–¥–∞–Ω–∏–µ GitHub issues

#### Prometheus + Grafana MCP (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üü° –°–†–ï–î–ù–ò–ô, Tier 2)
**–ú–µ—Ç—Ä–∏–∫–∏**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–¥–∞—á, —É—Å–ø–µ—à–Ω–æ—Å—Ç—å, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –æ—à–∏–±–∫–∏, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤, PR —Å–æ–∑–¥–∞–Ω–Ω—ã–µ, —Ç–µ—Å—Ç—ã –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ

### 7. –£–ª—É—á—à–µ–Ω–∏–µ –≤—Ö–æ–¥–∞: –∫–∞—á–µ—Å—Ç–≤–æ TODO –∏ –ø–ª–∞–Ω–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞**: –ö–∞—á–µ—Å—Ç–≤–æ –≤—Ö–æ–¥–∞ –∫—Ä–∏—Ç–∏—á–Ω–æ, –ø–ª–æ—Ö–æ–π —Ñ–æ—Ä–º–∞—Ç TODO –º–æ–∂–µ—Ç –ª–æ–º–∞—Ç—å –ø–∞—Ä—Å–∏–Ω–≥.

**–†–µ—à–µ–Ω–∏—è**:
- **–ê–≤—Ç–æ-–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è TODO**: –µ—Å–ª–∏ —Ñ–æ—Ä–º–∞—Ç –ø–ª–æ—Ö–æ–π, –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤–º–µ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è "usefulness LLM" –∫–∞–∫ –∫–æ—Å—Ç—ã–ª—è
- **–ê—Ç–æ–º–∏–∑–∞—Ü–∏—è**: –æ–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞ TODO = –æ–¥–∏–Ω –∏–∑–º–µ—Ä–∏–º—ã–π deliverable
- **LLM-–ø–∞—Ä—Å–∏–Ω–≥ TODO**: –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∏–µ—Ä–∞—Ä—Ö–∏–∏ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (—Å–º. —Ä–∞–∑–¥–µ–ª 3)

### 8. –ì–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ

**–ü—Ä–∏–Ω—Ü–∏–ø 1: –ö–∞–∂–¥—ã–π —Ü–∏–∫–ª –æ—Å—Ç–∞–≤–ª—è–µ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ —É—Å–∫–æ—Ä—è—é—Ç —Å–ª–µ–¥—É—é—â–∏–π**
- –®–∞–±–ª–æ–Ω—ã —Ç–µ—Å—Ç–æ–≤, –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã —Ñ–∏–∫—Å—Ç—É—Ä
- ADR –¥–ª—è —Å–ø–æ—Ä–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π
- –ò–Ω–¥–µ–∫—Å—ã docs, —Ä–µ—é–∑ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π

**–ü—Ä–∏–Ω—Ü–∏–ø 2: –ü—Ä–æ—Ü–µ—Å—Å –∏–∑–º–µ—Ä–∏–º**
- –ú–µ—Ç—Ä–∏–∫–∏ –≤—Ä–µ–º–µ–Ω–∏/–æ—à–∏–±–æ–∫ ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
- Process memory —Ö—Ä–∞–Ω–∏—Ç —É—Å–ø–µ—à–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ (—Ç–∏–ø –∑–∞–¥–∞—á–∏ √ó —à–∞–±–ª–æ–Ω √ó –º–æ–¥–µ–ª—å √ó —Ä–µ–∂–∏–º CLI)

**–ü—Ä–∏–Ω—Ü–∏–ø 3: –ú–µ—Ç–∞-—É—Ä–æ–≤–µ–Ω—å —É–ª—É—á—à–∞–µ—Ç —Å–∞–º —Å–µ–±—è**
- –†–∞–∑ –≤ N –∑–∞–¥–∞—á –∑–∞–ø—É—Å–∫–∞—Ç—å "—Ä–µ–≤–∏–∑–∏—é –ø—Ä–æ—Ü–µ—Å—Å–∞": —á—Ç–æ —á–∞—â–µ –ª–æ–º–∞–ª–æ—Å—å, –≥–¥–µ —É—Ç–µ—á–∫–∏ –≤—Ä–µ–º–µ–Ω–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —ç–≤–æ–ª—é—Ü–∏—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏, –º–µ—Ç—Ä–∏–∫ –∏ —Ä–µ–≤—å—é

### 9. –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

#### –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏
```yaml
metrics:
  task_completion:
    total_tasks: 1250
    success_rate: 0.92
    avg_duration: 380  # —Å–µ–∫—É–Ω–¥
    by_type:
      code: {success: 0.89, avg_time: 420}
      docs: {success: 0.96, avg_time: 180}
      test: {success: 0.94, avg_time: 300}

  quality_gates:
    gate_pass_rate: 0.88
    common_failures: ["test_timeout", "lint_errors", "doc_incomplete"]
    auto_recovery_rate: 0.65

  llm_usage:
    total_calls: 15420
    cache_hit_rate: 0.73
    avg_response_time: 2.1  # —Å–µ–∫—É–Ω–¥
    error_rate: 0.02

  mcp_integration:
    github_prs_created: 342
    e2e_tests_run: 1250
    slack_notifications: 980
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### LLM —Ñ—É–Ω–∫—Ü–∏–∏ (config/config.yaml)
```yaml
llm:
  features:
    verify_work_done:
      enabled: true
      use_parallel: true  # best_of_two
      min_confidence: 70
    validate_results:
      enabled: true
      use_parallel: true
      min_quality: 60
      min_completeness: 70
      auto_retry: false
    filter_tasks:
      enabled: true
      batch_size: 10
    analyze_errors:
      enabled: true
      use_parallel: false  # use_fastest
    tool_selection:
      enabled: false  # –Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
    instruction_generation:
      enabled: false  # –Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
    todo_parsing:
      enabled: false  # –Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
    extract_docs_info:
      enabled: false  # –Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
  cache:
    enabled: true
    ttl: 3600  # 1 —á–∞—Å
    max_size: 100
```

### MCP —Å–µ—Ä–≤–µ—Ä—ã (config/config.yaml)
```yaml
mcp_servers:
  enabled: true
  life-docs:
    enabled: true
    # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å mcp_index.py –≤ Life
  github:
    enabled: true
    docker_service: mcp-github
    auto_pr: true
    auto_commit: false
    branch_prefix: "feature/"
  playwright:
    enabled: true
    docker_service: mcp-playwright
    headless: true
    auto_run_e2e: true
  postgres:
    enabled: true
    docker_service: mcp-postgres
    replace_file_status: true
  docker:
    enabled: true
    docker_service: mcp-docker
```

### Process Memory (process_memory.jsonl –∏–ª–∏ SQLite)
–§–æ—Ä–º–∞—Ç –∑–∞–ø–∏—Å–∏:
- key: `task_type`, `repo_area`, `template_id`, `model`, `new_chat/resume`, `gate_outcome`
- value: –º–µ—Ç—Ä–∏–∫–∏ –∏ –∫–æ—Ä–æ—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ

## –ü–æ—Ä—è–¥–æ–∫ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

### –§–∞–∑–∞ 1A: Core Quality Gates (1 –Ω–µ–¥–µ–ª—è)
1. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å —Ç–∏–ø–∏–∑–∞—Ü–∏—é –∑–∞–¥–∞—á (docs/code/refactor/test/release/devops)
2. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –±–∞–∑–æ–≤—ã–µ DoD –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞
3. ‚úÖ –°–æ–∑–¥–∞—Ç—å Quality Gates framework
4. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å Gate A (–ø–µ—Ä–µ–¥ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º) –∏ Gate E (–ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º)
5. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å diff fingerprint –∏ invariant checks

### –§–∞–∑–∞ 1B: LLM Intelligence (1 –Ω–µ–¥–µ–ª—è)
1. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å LLMManager improvements
2. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —É–º–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É —Ä–∞–±–æ—Ç—ã
3. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –∞–Ω–∞–ª–∏–∑ –æ—à–∏–±–æ–∫
4. ‚úÖ –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—É—é process memory

### –§–∞–∑–∞ 2: Essential MCP (2 –Ω–µ–¥–µ–ª–∏)
1. ‚úÖ GitHub MCP (PR automation)
2. ‚úÖ Playwright MCP (E2E testing)
3. ‚úÖ PostgreSQL MCP (data storage)
4. ‚úÖ Docker Compose configuration

### –§–∞–∑–∞ 3: Advanced Features (2 –Ω–µ–¥–µ–ª–∏)
1. ‚úÖ Slack notifications
2. ‚úÖ Sentry error tracking
3. ‚úÖ Prometheus metrics
4. ‚úÖ Advanced process memory

### –§–∞–∑–∞ 4: Optimization (2 –Ω–µ–¥–µ–ª–∏)
1. ‚úÖ Batch processing
2. ‚úÖ Advanced caching
3. ‚úÖ Auto-recovery mechanisms
4. ‚úÖ Performance monitoring

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –î–ª—è –∫–∞–∂–¥–æ–π LLM —Ñ—É–Ω–∫—Ü–∏–∏:
1. **Unit —Ç–µ—Å—Ç—ã** —Å –º–æ–∫–∞–º–∏ LLMManager
2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã** —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ LLM –∑–∞–ø—Ä–æ—Å–∞–º–∏
3. **–¢–µ—Å—Ç—ã fallback –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤** (–ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–∫–∞—Ç–∞ –Ω–∞ —Å—Ç–∞—Ä—ã–µ –º–µ—Ç–æ–¥—ã)
4. **–¢–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** (–±–∞—Ç—á-–æ–±—Ä–∞–±–æ—Ç–∫–∞, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ)

### –§–∞–π–ª—ã —Ç–µ—Å—Ç–æ–≤:
- `test/test_llm_verify_work_done.py`
- `test/test_llm_validate_results.py`
- `test/test_llm_filter_tasks.py`
- `test/test_llm_analyze_errors.py`
- `test/test_llm_utils.py`
- `test/test_quality_gates.py`
- `test/test_process_memory.py`
- `test/test_mcp_integrations.py`

### –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
- –ö–∞–∂–¥–∞—è —Ñ–∏—á–∞ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è –Ω–∞ 3-5 —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á–∞—Ö –ø–µ—Ä–µ–¥ –≤–∫–ª—é—á–µ–Ω–∏–µ–º –≤ production
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –∫–∞—á–µ—Å—Ç–≤–∞ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞ –∫–∞–∂–¥–æ–π —Ñ–∞–∑–µ

## –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ö–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
- **–ö–∞—á–µ—Å—Ç–≤–æ**: +40% (–±–ª–∞–≥–æ–¥–∞—Ä—è quality gates)
- **–°–∫–æ—Ä–æ—Å—Ç—å**: +50% (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ)
- **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: +60% (LLM validation, error analysis)
- **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**: +80% (MCP integrations)

### –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
- –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª: Todo ‚Üí Code ‚Üí Test ‚Üí PR ‚Üí Deploy
- –°–∞–º–æ–æ–±—É—á–µ–Ω–∏–µ: —Å–∏—Å—Ç–µ–º–∞ —É–ª—É—á—à–∞–µ—Ç—Å—è —Å –∫–∞–∂–¥—ã–º —Ü–∏–∫–ª–æ–º
- –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å: –ø–æ–ª–Ω–æ–µ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏–π
- –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å: –ª–µ–≥–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö MCP

## –†–∏—Å–∫–∏ –∏ –∫–æ–Ω—Ç—Ä–º–µ—Ä—ã

### –†–∏—Å–∫: –î—Ä–µ–π—Ñ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã Life –∏–∑-–∑–∞ –∞–≤—Ç–æ-–ø—É—à–∞
**–ö–æ–Ω—Ç—Ä–º–µ—Ä—ã**:
- –ì–µ–π—Ç—ã –∫–∞—á–µ—Å—Ç–≤–∞ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π Skeptic-—Ä–µ–≤—å—é –¥–ª—è –æ–ø–∞—Å–Ω—ã—Ö –∑–æ–Ω (`src/runtime/`, `src/state/`, `src/action/`)
- –ó–∞–ø—Ä–µ—Ç—ã –Ω–∞ force-push –∏ –∫–æ–º–º–∏—Ç –ø—Ä–∏ "–∫—Ä–∞—Å–Ω—ã—Ö" —Ç–µ—Å—Ç–∞—Ö
- Panic switch —á–µ—Ä–µ–∑ HTTP API (`/stop`) –∏–ª–∏ —Ñ–ª–∞–≥ –≤ –∫–æ–Ω—Ñ–∏–≥–µ

### –†–∏—Å–∫: –õ–æ–∂–Ω—ã–µ ¬´—É—Å–ø–µ—Ö–∏¬ª –ø–æ —Ä–µ–ø–æ—Ä—Ç–∞–º
**–ö–æ–Ω—Ç—Ä–º–µ—Ä—ã**:
- –£—Å–∏–ª–µ–Ω–Ω–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è: diff fingerprint + invariant checks + —Ç–µ—Å—Ç—ã
- LLM-–≤–∞–ª–∏–¥–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å –æ—Ü–µ–Ω–∫–æ–π –∫–∞—á–µ—Å—Ç–≤–∞/–ø–æ–ª–Ω–æ—Ç—ã
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ DoD

### –†–∏—Å–∫: –°—Ç–æ–∏–º–æ—Å—Ç—å/–Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –º–æ–¥–µ–ª–µ–π
**–ö–æ–Ω—Ç—Ä–º–µ—Ä—ã**:
- Process memory –¥–ª—è –≤—ã–±–æ—Ä–∞ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π/fallback —Ü–µ–ø–æ—á–∫–∏
- –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (LRU cache, TTL 1 —á–∞—Å)
- Batch processing –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏
- Fallback –Ω–∞ —Å—Ç–∞—Ä—ã–µ –º–µ—Ç–æ–¥—ã –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö LLM
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤

### –†–∏—Å–∫: –ü–µ—Ä–µ—É—Å–ª–æ–∂–Ω–µ–Ω–∏–µ
**–ö–æ–Ω—Ç—Ä–º–µ—Ä—ã**:
- –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –ø–æ —Ñ–∞–∑–∞–º (MVP: Gate A, D, E)
- –û—Ç–∫–∞—Ç –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏ –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö
- –û–±—à–∏—Ä–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∫–∞–∂–¥–æ–π —Ñ–∞–∑–µ (3-5 –∑–∞–¥–∞—á –¥–ª—è –∫–∞–∂–¥–æ–π —Ñ–∏—á–∏)
- –í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ —Ñ–∏—á —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

### –†–∏—Å–∫: –õ–æ–∂–Ω—ã–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è quality gates
**–ö–æ–Ω—Ç—Ä–º–µ—Ä—ã**:
- Confidence thresholds (–Ω–∞–ø—Ä–∏–º–µ—Ä, 70% –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫)
- Human override –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –∫–∞–ª–∏–±—Ä–æ–≤–∫–∞ –ø–æ—Ä–æ–≥–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- Fallback –Ω–∞ —Å—Ç–∞—Ä—ã–µ –º–µ—Ç–æ–¥—ã –ø—Ä–∏ –Ω–∏–∑–∫–æ–π —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏

## –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

```
codeAgent/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ llm/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ llm_utils.py              # NEW: –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è LLM
‚îÇ   ‚îú‚îÄ‚îÄ mcp/                          # NEW: MCP –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ mcp_manager.py            # –ú–µ–Ω–µ–¥–∂–µ—Ä MCP —Å–µ—Ä–≤–µ—Ä–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ github_integration.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ playwright_integration.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ postgres_integration.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ docker_integration.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ slack_integration.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sentry_integration.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ prometheus_integration.py
‚îÇ   ‚îú‚îÄ‚îÄ server.py                     # –û–ë–ù–û–í–ò–¢–¨: Quality Gates, LLM —Ñ—É–Ω–∫—Ü–∏–∏, MCP
‚îÇ   ‚îú‚îÄ‚îÄ status_manager.py             # –û–ë–ù–û–í–ò–¢–¨: PostgreSQL –ø–æ–¥–¥–µ—Ä–∂–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ task_logger.py                # –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨: —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏
‚îÇ   ‚îú‚îÄ‚îÄ quality_gates.py              # NEW: Quality Gates framework
‚îÇ   ‚îú‚îÄ‚îÄ process_memory.py             # NEW: Process Memory System
‚îÇ   ‚îú‚îÄ‚îÄ stage_controller.py           # NEW: Stage Controller
‚îÇ   ‚îî‚îÄ‚îÄ git_utils.py                  # –û–ë–ù–û–í–ò–¢–¨: –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Å –≥–µ–π—Ç–∞–º–∏
‚îú‚îÄ‚îÄ docker/
‚îÇ   ‚îú‚îÄ‚îÄ docker-compose.mcp.yml        # NEW: MCP —Å–µ—Ä–≤–µ—Ä—ã
‚îÇ   ‚îî‚îÄ‚îÄ docker-compose.agent.yml      # –°–£–©–ï–°–¢–í–£–ï–¢
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ config.yaml                   # –û–ë–ù–û–í–ò–¢–¨: task_definitions, llm.features, mcp_servers
‚îÇ   ‚îî‚îÄ‚îÄ mcp_settings.yaml             # NEW: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ MCP —Å–µ—Ä–≤–µ—Ä–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îú‚îÄ‚îÄ migrations/                       # NEW: SQL –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è PostgreSQL
‚îÇ   ‚îî‚îÄ‚îÄ 001_initial_schema.sql
‚îú‚îÄ‚îÄ process_memory.jsonl              # NEW: Process Memory (–∏–ª–∏ SQLite)
‚îî‚îÄ‚îÄ docs/
    ‚îî‚îÄ‚îÄ mcp_integration.md            # NEW: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è MCP –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
```

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)

```env
# –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ
PROJECT_DIR=D:\Space\life
CURSOR_API_KEY=your_cursor_api_key

# GitHub MCP
GITHUB_TOKEN=your_github_token
GITHUB_REPO=username/repo

# PostgreSQL
POSTGRES_USER=codeagent
POSTGRES_PASSWORD=secure_password

# Slack
SLACK_TOKEN=xoxb-your-slack-token
SLACK_CHANNEL=#dev-updates

# Sentry
SENTRY_DSN=https://your-sentry-dsn

# Grafana
GRAFANA_PASSWORD=admin_password
```

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **Discovery**: –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫—É—é –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å MCP –≤ —Å—Ä–µ–¥–µ Cursor Agent
2. **–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ**: –°–æ–∑–¥–∞—Ç—å –≤–µ—Ç–∫—É `feature/hybrid-improvements`
3. **–§–∞–∑–∞ 1A**: –ù–∞—á–∞—Ç—å —Å —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ –∑–∞–¥–∞—á –∏ –±–∞–∑–æ–≤—ã—Ö –≥–µ–π—Ç–æ–≤ (Gate A, E)
4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ö–∞–∂–¥–∞—è —Ñ–∏—á–∞ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è –Ω–∞ 3-5 –∑–∞–¥–∞—á–∞—Ö
5. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
6. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –û–±–Ω–æ–≤–ª—è—Ç—å docs –ø–æ –º–µ—Ä–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–≠—Ç–æ—Ç –≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–ª–∞–Ω –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç —Å–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã –≤—Å–µ—Ö —á–µ—Ç—ã—Ä–µ—Ö –ø–æ–¥—Ö–æ–¥–æ–≤:
- **–ö–∞—á–µ—Å—Ç–≤–æ –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å** –∏–∑ –ø–ª–∞–Ω–∞ process upgrade
- **LLM-–∏–Ω—Ç–µ–ª–ª–µ–∫—Ç** –∏–∑ –ø–ª–∞–Ω–∞ LLM improvements
- **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ä–æ–ª–µ–π** –∏–∑ –ø–ª–∞–Ω–∞ MCP gates
- **–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏** –∏–∑ –ø–ª–∞–Ω–∞ MCP roadmap

–†–µ–∑—É–ª—å—Ç–∞—Ç: —Å–∞–º–æ–æ–±—É—á–∞—é—â–∞—è—Å—è, –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –∫–æ—Ç–æ—Ä–∞—è —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —É–º–Ω–µ–µ —Å –∫–∞–∂–¥—ã–º –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º –∑–∞–¥–∞–Ω–∏–µ–º.