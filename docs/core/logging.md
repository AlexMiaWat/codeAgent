# Система логирования Code Agent

## Обзор
Система логирования обеспечивает детальное отслеживание работы сервера и выполнения задач. Каждая задача имеет свой отдельный лог-файл в `logs/`, что упрощает диагностику.

## Цветовая схема (ANSI)
В консоли используются ANSI-коды для выделения фаз выполнения:
- **Синий (Bright Blue)**: Инициализация, анализ задачи, генерация инструкций.
- **Желтый (Bright Yellow)**: Ожидание результата от Cursor.
- **Зеленый (Bright Green)**: Успешное завершение, создание файлов.
- **Красный (Bright Red)**: Ошибки и исключения.
- **Пурпурный (Bright Magenta)**: Текст отправляемых инструкций.

## Структура логов
- `logs/codeagent.log`: Основной лог сервера.
- `logs/errors.log`: Только критические ошибки.
- `logs/task_{id}_{timestamp}.log`: Детальный протокол выполнения конкретной задачи.

## Фазы выполнения задачи
1. **Инициализация**: Подготовка окружения логгера.
2. **Анализ**: Определение типа задачи по ключевым словам.
3. **Генерация**: Подстановка значений в шаблоны инструкций.
4. **Выполнение**: Отправка команды в Cursor (CLI или файл).
5. **Ожидание**: Мониторинг появления файла-результата.
6. **Завершение**: Обновление статусов и закрытие логгера.

## Настройка
Настройки находятся в `config/logging.yaml`. Вы можете изменить уровень детализации (`DEBUG`, `INFO`, `WARNING`) и параметры ротации файлов (по умолчанию 10MB, 5 архивных копий).

Для отключения цветов установите переменную окружения `NO_COLOR=1`.
