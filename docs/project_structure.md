# Структура проекта Code Agent

## Обзор структуры

```
codeAgent/
├── config/                  # Конфигурационные файлы
│   ├── config.yaml          # Основная конфигурация агента
│   └── agents.yaml          # Определения агентов (опционально)
├── docs/                    # Документация проекта
│   ├── architecture.md      # Архитектура системы
│   ├── setup.md             # Руководство по настройке
│   ├── api.md               # API Reference
│   └── project_structure.md # Этот файл
├── src/                     # Исходный код
│   ├── __init__.py
│   ├── server.py            # Основной сервер агента
│   ├── config_loader.py     # Загрузчик конфигурации
│   ├── status_manager.py    # Управление статусами проекта
│   ├── todo_manager.py      # Управление todo-листом
│   ├── agents/              # Определения агентов CrewAI
│   │   ├── __init__.py
│   │   └── executor_agent.py # Агент-исполнитель
│   └── tools/               # Пользовательские инструменты
│       └── __init__.py
├── logs/                    # Логи работы агента
├── main.py                  # Точка входа для запуска сервера
├── pyproject.toml           # Конфигурация проекта Python
├── .env.example             # Пример файла переменных окружения
├── .gitignore               # Git ignore правила
├── CHANGELOG.md             # История изменений
└── README.md                # Основная документация проекта
```

## Описание компонентов

### config/

Конфигурационные файлы в формате YAML:

- **config.yaml** - Основная конфигурация агента:
  - Настройки проекта (директории, файлы)
  - Настройки агента (роль, цель, инструменты)
  - Настройки сервера (интервалы, задержки)
  - Настройки документации и логирования

- **agents.yaml** - Определения агентов CrewAI (опционально):
  - Базовые агенты
  - Специализированные агенты для расширения

### docs/

Документация проекта:

- **architecture.md** - Подробное описание архитектуры системы
- **setup.md** - Пошаговое руководство по установке и настройке
- **api.md** - API Reference с описанием всех модулей и классов
- **project_structure.md** - Описание структуры проекта (этот файл)

### src/

Исходный код агента:

#### Основные модули

- **server.py** - Основной сервер агента:
  - Бесконечный цикл работы
  - Выполнение задач через агентов CrewAI
  - Координация всех компонентов

- **config_loader.py** - Загрузка конфигурации:
  - Чтение YAML файлов
  - Подстановка переменных окружения
  - Валидация конфигурации

- **status_manager.py** - Управление статусами:
  - Чтение/запись файла статусов
  - Форматирование статусов в Markdown
  - Отслеживание выполнения задач

- **todo_manager.py** - Управление todo-листом:
  - Парсинг различных форматов (txt, yaml, md)
  - Управление иерархией задач
  - Отметка выполненных задач

#### agents/

Определения агентов CrewAI:

- **executor_agent.py** - Агент-исполнитель:
  - Основной агент для выполнения задач
  - Настройка инструментов
  - Интеграция с документацией проекта

#### tools/

Пользовательские инструменты для агентов (для расширения функциональности)

### logs/

Директория для логов работы агента:

- **code_agent.log** - Основной файл логов

### Корневые файлы

- **main.py** - Точка входа для запуска сервера агента
- **pyproject.toml** - Конфигурация проекта Python (зависимости, настройки)
- **.env.example** - Пример файла переменных окружения
- **.gitignore** - Правила игнорирования файлов для Git
- **CHANGELOG.md** - История изменений проекта
- **README.md** - Основная документация с описанием проекта и установкой

## Расположение файлов проекта

### В директории Code Agent (`D:\Space\codeAgent\`)

- Все файлы самого агента
- Конфигурация агента
- Документация агента

### В директории обрабатываемого проекта (`PROJECT_DIR`, например `D:\Space\life\`)

- **docs/** - Документация проекта (читается агентом)
- **todo.txt** (или `todo.yaml`, `todo.md`) - Список задач (читается агентом)
- **codeAgentProjectStatus.md** - Статусы выполнения (создается/обновляется агентом)

## Принципы организации

1. **Разделение ответственности**:
   - Каждый модуль отвечает за свою функциональность
   - Четкое разделение между конфигурацией, логикой и документацией

2. **Модульность**:
   - Компоненты могут быть легко расширены или заменены
   - Инструменты и агенты могут добавляться без изменения основной логики

3. **Конфигурируемость**:
   - Все настройки вынесены в конфигурационные файлы
   - Поддержка переменных окружения для секретов

4. **Документированность**:
   - Подробная документация для каждого компонента
   - Примеры использования и настройки

## Расширение проекта

### Добавление нового агента

1. Создать файл в `src/agents/` (например, `documentation_agent.py`)
2. Определить агента с помощью `Agent` из CrewAI
3. Добавить агента в `src/agents/__init__.py`
4. Использовать в `server.py` при необходимости

### Добавление нового инструмента

1. Создать класс инструмента в `src/tools/`
2. Наследовать от `BaseTool` из `crewai_tools`
3. Реализовать метод `_run()`
4. Добавить инструмент к агенту в `executor_agent.py`

### Добавление нового формата todo

1. Добавить метод парсинга в `todo_manager.py`
2. Обновить `_load_todos()` для поддержки нового формата
3. Обновить документацию в `docs/setup.md`

## Следующие шаги

1. Изучите [README.md](../README.md) для общего понимания проекта
2. Прочитайте [architecture.md](architecture.md) для понимания архитектуры
3. Следуйте [setup.md](setup.md) для настройки и запуска
4. Обратитесь к [api.md](api.md) для работы с API
