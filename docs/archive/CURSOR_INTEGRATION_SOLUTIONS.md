# –†–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Cursor CLI

**–î–∞—Ç–∞:** 2026-01-18
**–ü–æ—Å–ª–µ–¥–Ω—è—è –ø—Ä–æ–≤–µ—Ä–∫–∞:** 2026-01-22
**–°—Ç–∞—Ç—É—Å:** üîß –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è (–∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç)

---

## üéØ –û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞

**–°–∏–º–ø—Ç–æ–º—ã:**
- ‚úÖ –ö–æ–º–∞–Ω–¥—ã `agent -p` –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è (Exit code: 0)
- ‚ùå –ó–∞–¥–∞—á–∏ –Ω–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è (—Ñ–∞–π–ª—ã –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è)
- ‚ùå Stdout –ø—É—Å—Ç–æ–π –∏–ª–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π
- ‚ùå –ê–≥–µ–Ω—Ç –Ω–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç side-effects

**–ü—Ä–∏—á–∏–Ω–∞:** `agent -p` –≤ non-interactive —Ä–µ–∂–∏–º–µ —á–µ—Ä–µ–∑ Docker **–Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–¥–∞—á–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**, –∞ —Ç–æ–ª—å–∫–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç.

---

## üí° –†–µ—à–µ–Ω–∏–µ #1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ —Å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–µ–π (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

### –ö–æ–Ω—Ü–µ–ø—Ü–∏—è

–í–º–µ—Å—Ç–æ `agent -p` (non-interactive) –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º —Å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–µ–π —á–µ—Ä–µ–∑ expect-–ø–æ–¥–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã.

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

```python
# –ò—Å–ø–æ–ª—å–∑—É–µ–º pexpect –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
import pexpect

def execute_with_interactive_mode(instruction: str, working_dir: str, timeout: int = 300):
    """
    –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º —Å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–µ–π
    """
    # –ó–∞–ø—É—Å–∫–∞–µ–º agent –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ
    child = pexpect.spawn(
        'docker', 
        ['exec', '-it', 'cursor-agent', 'bash'],
        timeout=timeout,
        encoding='utf-8'
    )
    
    try:
        # –ñ–¥–µ–º –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ bash
        child.expect(r'[\$#] ')
        
        # –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ —Ä–∞–±–æ—á—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
        child.sendline(f'cd /workspace')
        child.expect(r'[\$#] ')
        
        # –ó–∞–ø—É—Å–∫–∞–µ–º agent –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ
        child.sendline('/root/.local/bin/agent')
        
        # –ñ–¥–µ–º –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ agent (–º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞–∑–Ω—ã–º)
        child.expect(r'[>:] ', timeout=30)
        
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é
        child.sendline(instruction)
        
        # –ñ–¥–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º)
        # –ù–∞–ø—Ä–∏–º–µ—Ä: "Task completed", "Done", "Created file", –∏ —Ç.–¥.
        index = child.expect([
            r'Task completed',
            r'Done',
            r'Created',
            r'File saved',
            pexpect.TIMEOUT
        ], timeout=timeout)
        
        # –ü–æ–ª—É—á–∞–µ–º –≤—ã–≤–æ–¥
        output = child.before + child.after
        
        # –í—ã—Ö–æ–¥–∏–º –∏–∑ agent
        child.sendline('exit')
        child.expect(pexpect.EOF)
        
        return {
            'success': index < 4,  # –ù–µ TIMEOUT
            'output': output,
            'completed': index < 4
        }
        
    finally:
        child.close()
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
- ‚úÖ –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º - –∞–≥–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–¥–∞—á–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ pexpect
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞
- ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏
- ‚ö†Ô∏è –°–ª–æ–∂–Ω–µ–µ –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è TTY (`-it` –≤ docker exec)
- ‚ö†Ô∏è –ù—É–∂–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏

---

## üí° –†–µ—à–µ–Ω–∏–µ #2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (–£–ñ–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–û)

### –ö–æ–Ω—Ü–µ–ø—Ü–∏—è

–ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç `agent -p` –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–∞–π–ª–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å Cursor.

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. Code Agent —Å–æ–∑–¥–∞–µ—Ç —Ñ–∞–π–ª –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏: `cursor_commands/instruction_{task_id}.txt`
2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–∏–ª–∏ —Å–∫—Ä–∏–ø—Ç) —á–∏—Ç–∞–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –≤ Cursor
3. –†–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤: `cursor_results/result_{task_id}.txt`
4. Code Agent –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
- ‚úÖ –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (`src/cursor_file_interface.py`)
- ‚úÖ –ù–∞–¥–µ–∂–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ù–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç CLI
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –æ—Ç–ª–∞–¥–∫–∞

### –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏–ª–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
- ‚ö†Ô∏è –ù–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π

### –£–ª—É—á—à–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

–î–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ñ–∞–π–ª–æ–≤ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π —á–µ—Ä–µ–∑ Cursor Rules:

```markdown
# .cursor/rules

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π

1. –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `cursor_commands/`
2. –ü—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞ `instruction_*.txt`:
   - –ü—Ä–æ—á–∏—Ç–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é
   - –í—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–¥–∞—á—É
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ `cursor_results/result_*.txt`
   - –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—É—é —Ñ—Ä–∞–∑—É "–ó–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞!"
```

---

## üí° –†–µ—à–µ–Ω–∏–µ #3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Cursor API (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)

### –ö–æ–Ω—Ü–µ–ø—Ü–∏—è

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π API Cursor –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á.

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é Cursor API
curl https://cursor.com/docs/api
```

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è (–µ—Å–ª–∏ API –¥–æ—Å—Ç—É–ø–µ–Ω)

```python
import requests

def execute_via_api(instruction: str, project_dir: str, api_key: str):
    """
    –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Cursor API
    """
    response = requests.post(
        'https://api.cursor.com/v1/execute',
        headers={
            'Authorization': f'Bearer {api_key}',
            'Content-Type': 'application/json'
        },
        json={
            'instruction': instruction,
            'project_dir': project_dir,
            'mode': 'execute'  # –†–µ–∂–∏–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ —á–∞—Ç
        }
    )
    
    return response.json()
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
- ‚úÖ –ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- ‚úÖ –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏
- ‚ö†Ô∏è –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —Ç–∞–∫–æ–π API
- ‚ö†Ô∏è –ú–æ–∂–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å –ø–ª–∞—Ç–Ω—É—é –ø–æ–¥–ø–∏—Å–∫—É

---

## üí° –†–µ—à–µ–Ω–∏–µ #4: –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (–ü–†–ê–ö–¢–ò–ß–ù–û–ï –†–ï–®–ï–ù–ò–ï)

### –ö–æ–Ω—Ü–µ–ø—Ü–∏—è

–ö–æ–º–±–∏–Ω–∞—Ü–∏—è CLI –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞—á –∏ —Ñ–∞–π–ª–æ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö.

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

```python
class HybridCursorInterface:
    """
    –ì–∏–±—Ä–∏–¥–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å: CLI + —Ñ–∞–π–ª–æ–≤—ã–π
    """
    
    def __init__(self):
        self.cli = CursorCLIInterface()
        self.file = CursorFileInterface()
    
    def execute_task(self, instruction: str, task_id: str, complexity: str = 'auto'):
        """
        –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –≤—ã–±–æ—Ä–æ–º –º–µ—Ç–æ–¥–∞
        
        Args:
            instruction: –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
            task_id: ID –∑–∞–¥–∞—á–∏
            complexity: 'simple', 'complex', 'auto'
        """
        # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
        if complexity == 'auto':
            complexity = self._determine_complexity(instruction)
        
        if complexity == 'simple':
            # –ü—Ä–æ—Å—Ç—ã–µ –∑–∞–¥–∞—á–∏ - —á–µ—Ä–µ–∑ CLI (–±—ã—Å—Ç—Ä–æ, –Ω–æ –º–æ–∂–µ—Ç –Ω–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å—Å—è)
            result = self.cli.execute(instruction)
            
            # –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
            if not self._verify_execution(task_id):
                # Fallback –Ω–∞ —Ñ–∞–π–ª–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                return self._execute_via_file(instruction, task_id)
            
            return result
        else:
            # –°–ª–æ–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏ - —Å—Ä–∞–∑—É —á–µ—Ä–µ–∑ —Ñ–∞–π–ª–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
            return self._execute_via_file(instruction, task_id)
    
    def _determine_complexity(self, instruction: str) -> str:
        """
        –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∑–∞–¥–∞—á–∏
        """
        # –ü—Ä–æ—Å—Ç—ã–µ –∑–∞–¥–∞—á–∏: –≤–æ–ø—Ä–æ—Å—ã, –∞–Ω–∞–ª–∏–∑ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
        simple_keywords = ['—á—Ç–æ', '–∫–∞–∫', '–ø–æ—á–µ–º—É', '–æ–±—ä—è—Å–Ω–∏', '–ø–æ–∫–∞–∂–∏', '–Ω–∞–π–¥–∏']
        
        # –°–ª–æ–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏: —Å–æ–∑–¥–∞–Ω–∏–µ, –∏–∑–º–µ–Ω–µ–Ω–∏–µ, —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥
        complex_keywords = ['—Å–æ–∑–¥–∞–π', '–∏–∑–º–µ–Ω–∏', '—Ä–µ—Ñ–∞–∫—Ç–æ—Ä', '–¥–æ–±–∞–≤—å', '—É–¥–∞–ª–∏', '—Ä–µ–∞–ª–∏–∑—É–π']
        
        instruction_lower = instruction.lower()
        
        if any(keyword in instruction_lower for keyword in complex_keywords):
            return 'complex'
        elif any(keyword in instruction_lower for keyword in simple_keywords):
            return 'simple'
        else:
            return 'complex'  # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å—á–∏—Ç–∞–µ–º —Å–ª–æ–∂–Ω–æ–π
    
    def _verify_execution(self, task_id: str) -> bool:
        """
        –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ (side-effects)
        """
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –æ–∂–∏–¥–∞–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤
        expected_files = self._get_expected_files(task_id)
        return all(Path(f).exists() for f in expected_files)
    
    def _execute_via_file(self, instruction: str, task_id: str):
        """
        –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —Ñ–∞–π–ª–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
        """
        # –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é
        self.file.write_instruction(instruction, task_id)
        
        # –ñ–¥–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
        result = self.file.wait_for_result(
            task_id=task_id,
            timeout=600,
            control_phrase="–ó–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞!"
        )
        
        return result
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –º–µ—Ç–æ–¥–∞
- ‚úÖ Fallback –Ω–∞ —Ñ–∞–π–ª–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
- ‚úÖ –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å

---

## üí° –†–µ—à–µ–Ω–∏–µ #5: –£–ª—É—á—à–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ CLI –ø–æ–¥—Ö–æ–¥–∞

### –ü—Ä–æ–±–ª–µ–º–∞

–¢–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥: `agent -p` –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–¥–∞—á–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

### –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

#### 5.1. –î–æ–±–∞–≤–∏—Ç—å —Ñ–ª–∞–≥ `--execute` (–µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é agent –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Ñ–ª–∞–≥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
docker exec cursor-agent /root/.local/bin/agent --help | grep -i execute
```

#### 5.2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `--wait` –∏–ª–∏ `--sync` (–µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–ª–∞–≥–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
docker exec cursor-agent /root/.local/bin/agent --help | grep -i wait
docker exec cursor-agent /root/.local/bin/agent --help | grep -i sync
```

#### 5.3. –î–æ–±–∞–≤–∏—Ç—å —è–≤–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ "Execute immediately"

```python
def execute_with_explicit_command(instruction: str):
    """
    –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —è–≤–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
    """
    # –§–æ—Ä–º–∏—Ä—É–µ–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é —Å —è–≤–Ω—ã–º —É–∫–∞–∑–∞–Ω–∏–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
    enhanced_instruction = f"""
EXECUTE IMMEDIATELY:

{instruction}

IMPORTANT:
- Perform the action NOW
- Do not ask for confirmation
- Create files and modify code as requested
- Report completion when finished

Execute this task immediately without any questions.
"""
    
    return cli.execute(enhanced_instruction)
```

#### 5.4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Background Agents (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã)

–°–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Cursor, –º–æ–≥—É—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å Background Agents –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á.

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ background agents
docker exec cursor-agent /root/.local/bin/agent --help | grep -i background
```

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ—à–µ–Ω–∏–π

| –†–µ—à–µ–Ω–∏–µ | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å | –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|---------|-----------|------------|---------------|--------------|
| #1 –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π + pexpect | –í—ã—Å–æ–∫–∞—è | –í—ã—Å–æ–∫–∞—è | –ü–æ–ª–Ω–∞—è | ‚≠ê‚≠ê‚≠ê‚≠ê |
| #2 –§–∞–π–ª–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å | –ù–∏–∑–∫–∞—è | –í—ã—Å–æ–∫–∞—è | –ß–∞—Å—Ç–∏—á–Ω–∞—è | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| #3 Cursor API | –°—Ä–µ–¥–Ω—è—è | –í—ã—Å–æ–∫–∞—è | –ü–æ–ª–Ω–∞—è | ‚≠ê‚≠ê‚≠ê (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω) |
| #4 –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥ | –°—Ä–µ–¥–Ω—è—è | –í—ã—Å–æ–∫–∞—è | –ü–æ–ª–Ω–∞—è | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| #5 –£–ª—É—á—à–µ–Ω–∏–µ CLI | –ù–∏–∑–∫–∞—è | –°—Ä–µ–¥–Ω—è—è | –ü–æ–ª–Ω–∞—è | ‚≠ê‚≠ê‚≠ê |

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–π –ø–ª–∞–Ω (1-2 –¥–Ω—è)

1. ‚úÖ **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–∞–π–ª–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω)
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —á–µ—Ä–µ–∑ Cursor Rules
   - –î–æ–±–∞–≤–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π

2. ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é Cursor CLI**
   - –ù–∞–π—Ç–∏ —Ñ–ª–∞–≥–∏ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ Background Agents API

### –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–π –ø–ª–∞–Ω (1-2 –Ω–µ–¥–µ–ª–∏)

3. üîß **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∑–∞–¥–∞—á
   - Fallback –Ω–∞ —Ñ–∞–π–ª–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ side-effects

4. üîß **–î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º —Å pexpect**
   - –î–ª—è –∑–∞–¥–∞—á, —Ç—Ä–µ–±—É—é—â–∏—Ö –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
   - –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ expect-–ø–æ–¥–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–π –ø–ª–∞–Ω (1+ –º–µ—Å—è—Ü)

5. üîç **–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å Cursor API**
   - –°–≤—è–∑–∞—Ç—å—Å—è —Å –∫–æ–º–∞–Ω–¥–æ–π Cursor
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ API –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

6. üîç **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ —É–ª—É—á—à–µ–Ω–∏—è**
   - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
   - –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á
   - –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

---

## üîß –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

### –î–µ–π—Å—Ç–≤–∏–µ #1: –£–ª—É—á—à–∏—Ç—å —Ñ–∞–π–ª–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

–î–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:

```python
# src/cursor_file_watcher.py
import time
from pathlib import Path
from watchdog.observers import Observer
from watchdog.events import FileSystemEventHandler

class CursorInstructionHandler(FileSystemEventHandler):
    """
    –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
    """
    
    def __init__(self, cursor_interface):
        self.cursor = cursor_interface
    
    def on_created(self, event):
        if event.is_directory:
            return
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —ç—Ç–æ —Ñ–∞–π–ª –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
        if 'instruction_' in event.src_path and event.src_path.endswith('.txt'):
            self.process_instruction(event.src_path)
    
    def process_instruction(self, instruction_file: str):
        """
        –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
        """
        # –ß–∏—Ç–∞–µ–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é
        instruction = Path(instruction_file).read_text(encoding='utf-8')
        
        # –í—ã–ø–æ–ª–Ω—è–µ–º —á–µ—Ä–µ–∑ Cursor (–≤—Ä—É—á–Ω—É—é –∏–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
        # –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
        
        print(f"–ù–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: {instruction_file}")
        print(f"–°–æ–¥–µ—Ä–∂–∏–º–æ–µ: {instruction[:100]}...")
```

### –î–µ–π—Å—Ç–≤–∏–µ #2: –î–æ–±–∞–≤–∏—Ç—å —è–≤–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

–û–±–Ω–æ–≤–∏—Ç—å `PromptFormatter` –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —è–≤–Ω—ã—Ö –∫–æ–º–∞–Ω–¥:

```python
# src/prompt_formatter.py

@staticmethod
def format_task_instruction_with_execution(
    task_name: str,
    task_description: str,
    output_file: Optional[str] = None,
    control_phrase: str = "–ó–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞!"
) -> str:
    """
    –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ —Å —è–≤–Ω—ã–º —É–∫–∞–∑–∞–Ω–∏–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
    """
    instruction = f"""
EXECUTE IMMEDIATELY - NO QUESTIONS:

ACTION:
{task_name}

DESCRIPTION:
{task_description}

REQUIREMENTS:
- Execute this task RIGHT NOW
- Do NOT ask for confirmation
- Do NOT explain unless explicitly requested
- Perform all necessary actions (create files, modify code, etc.)
- Save all changes immediately

CONSTRAINTS:
"""
    
    if output_file:
        instruction += f"- Save result to: {output_file}\n"
    
    instruction += f"""- Add control phrase at the end: "{control_phrase}"
- Report completion when finished

IMPORTANT: This is an automated task. Execute immediately without any questions or explanations.
"""
    
    return instruction
```

---

## üìù –í—ã–≤–æ–¥—ã

1. **–¢–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥ (`agent -p`) –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á –≤ Docker
2. **–§–∞–π–ª–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å - –Ω–∞–¥–µ–∂–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ**, –∫–æ—Ç–æ—Ä–æ–µ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
3. **–ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥** - –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –±–∞–ª–∞–Ω—Å–∞ –º–µ–∂–¥—É –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–µ–π –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å—é
4. **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º —Å pexpect** - –¥–ª—è –∑–∞–¥–∞—á, —Ç—Ä–µ–±—É—é—â–∏—Ö –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ—à–µ–Ω–∏—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω—ã, –≥–æ—Ç–æ–≤—ã –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
