# Исследование автоматизации через Cursor CLI

## Текущая ситуация

**Проблема:** `cursor-agent` команда НЕ найдена в системе.

**Что есть:**
- ✅ `cursor.CMD` / `cursor.exe` - это обычный редактор Cursor IDE
- ❌ `cursor-agent` - НЕ найден в PATH

**Вывод:** `cursor-agent` - это отдельная CLI утилита, которая должна быть установлена отдельно.

## Что нужно для автоматического выполнения

По документации Cursor, для автоматического выполнения нужна команда `cursor-agent` с параметрами:

```bash
cursor-agent -p --force "инструкция"
```

Где:
- `-p` / `--print` - non-interactive режим
- `--force` - автоматическое применение изменений
- `--mode=plan` или `--mode=ask` - режим работы

## Варианты решения

### Вариант 1: Установка/настройка cursor-agent

Нужно найти способ установки `cursor-agent`:

1. **Через npm:** `npm install -g cursor-agent` (если доступно)
2. **Через Cursor IDE:** Возможно, есть встроенная команда установки
3. **Через отдельную загрузку:** Может быть отдельный установочный файл

### Вариант 2: Использование Background Agents API

Для автоматизации через API (требует API ключ CURSOR_API_KEY):

```python
import requests

def create_cursor_agent(instruction: str, repository: str):
    """Создать агента через Background Agents API"""
    api_key = os.getenv("CURSOR_API_KEY")
    response = requests.post(
        "https://api.cursor.com/v0/agents",
        headers={"Authorization": f"Bearer {api_key}"},
        json={
            "repository": repository,  # GitHub репозиторий
            "instruction": instruction
        }
    )
    return response.json()
```

**Ограничения:**
- Работает только с GitHub репозиториями
- Требует API ключ
- Не работает с локальными проектами напрямую

### Вариант 3: Создание расширения для Cursor

Расширение для Cursor, которое:
- Автоматически читает файлы из `cursor_commands/`
- Создает новый чат
- Выполняет инструкции
- Сохраняет результаты в `cursor_results/`

**Преимущества:**
- Работает с локальными проектами
- Полностью автоматическое выполнение
- Интеграция с Cursor IDE

### Вариант 4: Использование MCP (Model Context Protocol)

Если Cursor поддерживает MCP серверы, можно создать MCP сервер для автоматизации.

## Рекомендации для Code Agent

**Текущее состояние:**
- ❌ `cursor-agent` не найден - автоматизация через CLI невозможна
- ✅ Файловый интерфейс работает, но требует ручного участия
- ⚠️ Background Agents API требует GitHub репозиторий

**Варианты для автоматизации:**

1. **Найти/установить `cursor-agent`** - лучший вариант для автоматизации
2. **Использовать Background Agents API** - если проект на GitHub
3. **Создать расширение для Cursor** - для локальной автоматизации
4. **Использовать файловый интерфейс** - как временное решение

## Следующие шаги

1. Проверить документацию Cursor на предмет установки `cursor-agent`
2. Проверить, доступен ли Background Agents API и есть ли API ключ
3. Рассмотреть создание расширения для Cursor для автоматизации
4. Временно использовать файловый интерфейс с инструкциями для пользователя
